{"data":{"site":{"siteMetadata":{"author":{"name":"박재성","contacts":{"twitter":"#"}},"disqusShortname":"","subtitle":"건설환경공학을 전공하는 개발자. 스타트업에 도전하는 것과 새로운 기술들을 공부하는 것을 사랑합니다.","title":"Blog by ParkJaesung","url":"https://lumen.netlify.com"}},"markdownRemark":{"id":"916ba025-0714-56f2-9d7c-d9ec333dee3e","html":"<h1 id=\"mqtt-실전-응용하기---wildcard\"><a href=\"#mqtt-%EC%8B%A4%EC%A0%84-%EC%9D%91%EC%9A%A9%ED%95%98%EA%B8%B0---wildcard\" aria-label=\"mqtt 실전 응용하기   wildcard permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MQTT 실전 응용하기 - WildCard</h1>\n<p>MQTT를 활용하여 실제 개발을 진행하려 하니 몇가지 궁금한점과 고려해야할 사항이 생겼다. MQTT를 소개한 글에서 언급한 바와 같이 MQTT는 IoT 프로젝트 통신에 적합하기에 아두이노에서 여러 센서들의 데이터를 받아오는 gateway를 만들어보고자 하였다. 아두이노쪽에서 publish하게 된다면, 클라이언트측에서 해당 topic에 subscribe를 하게 되는데, 구조는 다음과 같이 생각해볼 수 있다. </p>\n<p><img src=\"/media/mqtt-wildcard/mqtt-tmp.001.jpeg\"></p>\n<p>그렇다면 아두이노 기기를 추가하고, 센서를 추가하거나 변경할때마다 topic 관리가 복잡해질것으로 생각되었다. 그래서 생각해본 것이 http서버를 만들때 처럼 동적 url(여기서는 topic)을 사용하는 것이다. </p>\n<p><code class=\"language-text\">/Arduino1/sensor/{sensor_name}</code></p>\n<p>위와 같이 topic을 설정할 수 있다면, 관리가 더욱 용이할 것으로 생각되었고, mqtt에서는 이를 <code class=\"language-text\">WildCard</code>를 통해서 구현할 수 있었다.</p>\n<p>MQTT에서 WildCard는 크게 두가지 종류가 있다. </p>\n<ol>\n<li>Single Level : +\nSingle Level + 는 이름에서 알 수 있다시피 topic에서 한단계의 문자열을 대체하는 문자이다.</li>\n</ol>\n<p>아래 예시를 살펴보자\n<img src=\"/media/mqtt-wildcard/topic_wildcard_plus.png\"></p>\n<p><img src=\"/media/mqtt-wildcard/topic_wildcard_plus_example.png\"></p>\n<p><code class=\"language-text\">Myhome/groundfloor/livingroom/temperature</code>, <code class=\"language-text\">Myhome/groundfloor/kitchen/temperature</code>와 같이 + 문자의 자리에는 하나의 문자열이 들어간다. </p>\n<p>다만, <code class=\"language-text\">Myhome/groundfloor/kitchen/fridge/temperature</code>에서와 같이, <code class=\"language-text\">/kitchen/fridge</code>처럼 여러 level은 해당되지 않는다.</p>\n<ol start=\"2\">\n<li>Multi Level : #\nMulti Level은 여러 단계의 topic을 subcribe할 수 있도록 한다. </li>\n</ol>\n<p><img src=\"/media/mqtt-wildcard/topic_wildcard_hash.png\"></p>\n<p><img src=\"/media/mqtt-wildcard/topic_wildcard_hash_example.png\"></p>\n<p>1번 예시를 활용해보자면,\n<code class=\"language-text\">myhome/groundfloor/#/temperature</code>의 경우에는\nSingle Level과는 다르게 <code class=\"language-text\">myhome/groundfloor/kitchen/fridge/temperature</code>이 정상적으로 subscribe됨을 확인할 수 있다.</p>\n<p>WildCard를 사용해서 MQTT-Explorer와 Python 코드에서 직접 예시를 실행해보자. 그러면 동적으로 다량의 기기와 센서데이터를 관리할때 훨씬 편하게 작업할 수 있음을 확인할 수 있을것이다. </p>\n<h2 id=\"reference\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p>예시 자료 : <a href=\"https://www.hivemq.com/blog/mqtt-essentials-part-5-mqtt-topics-best-practices/\">MQTT Essentials Part 5: MQTT Topics &#x26; Best Practices</a></p>","fields":{"slug":"/posts/mqtt-wildcard/","tagSlugs":["/tag/mqtt/","/tag/io-t/","/tag/server/"]},"frontmatter":{"date":"2018-05-06T22:40:32.169Z","description":"MQTT의 WildCard 사용하기","tags":["MQTT","IoT","server"],"title":"MQTT 실전 응용하기 - WildCard"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/mqtt-wildcard/"}}